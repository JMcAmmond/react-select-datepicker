import{j as y}from"./jsx-runtime-DM0iHAxA.js";import{r as i,R as ce}from"./iframe-C3P2kIdD.js";const ve=(e,t,a)=>{const n=Le(e,t),d=Math.min(a,n);return new Date(e,t-1,d,0,0,0,0)},q=e=>new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0),be=e=>!isNaN(e.getTime()),Le=(e,t)=>new Date(e,t,0).getDate(),g="rsd_";class z{constructor(t=50){this.cache=new Map,this.maxSize=t}get(t){const a=this.cache.get(t);return a!==void 0&&(this.cache.delete(t),this.cache.set(t,a)),a}set(t,a){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){const n=this.cache.keys().next().value;n!==void 0&&this.cache.delete(n)}this.cache.set(t,a)}clear(){this.cache.clear()}}const le=new z,se=new z,oe=new z,J=(...e)=>e.map(t=>String(t||"undefined")).join("|"),P=(e,t,a)=>{const n=Math.floor((t-e)/a)+1,d=new Array(n);for(let o=0;o<n;o++)d[o]=e+o*a;return d},Me=(e,t,a)=>{const n=J(e?.getFullYear()||"undefined",t?.getFullYear()||new Date().getFullYear(),a||!1);let d=le.get(n);if(d)return d;const o=t?t.getFullYear():new Date().getFullYear(),s=e?e.getFullYear():1900;let r=P(o,s,-1);a&&(r=r.reverse()),d=new Array(r.length);for(let l=0;l<r.length;l++)d[l]={value:r[l],label:`${r[l]}`};return le.set(n,d),d},ie=(e,t,a=-1,n={1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"})=>{const d=J(e?.getFullYear()||"undefined",t?.getFullYear()||"undefined",a,Object.keys(n).length);let o=se.get(d);if(o)return o;let s=P(1,12,1);if(t&&a!==-1&&a===t.getFullYear()){const r=t.getMonth()+1;s=s.slice(0,r)}if(e&&a!==-1&&a===e.getFullYear()){const r=e.getMonth()+1;s=s.slice(r-1,s.length)}o=new Array(s.length);for(let r=0;r<s.length;r++){const l=s[r];o[r]={value:l,label:n[l]||`Month ${l}`}}return se.set(d,o),o},we=(e,t,a=-1,n=-1)=>{const d=J(e?.getFullYear()||"undefined",e?.getMonth()||"undefined",t?.getFullYear()||"undefined",t?.getMonth()||"undefined",a,n);let o=oe.get(d);if(o)return o;let s=[];if(a===-1)s=P(1,31,1);else{const r=n===-1?1900:n,l=new Date(r,a,0).getDate();s=P(1,l,1)}if(t&&n===t.getFullYear()&&a===t.getMonth()+1){const r=t.getDate();s=s.slice(0,r)}if(e&&n===e.getFullYear()&&a===e.getMonth()+1){const r=e.getDate();s=s.slice(r-1,s.length)}o=new Array(s.length);for(let r=0;r<s.length;r++)o[r]={value:s[r],label:`${s[r]}`};return oe.set(d,o),o},Ce=["day/month/year","day/year/month","month/day/year","month/year/day","year/month/day","year/day/month"];function ke(e){return Ce.includes(e)}function qe(e,t){if(!e||!t)return!0;const a=q(e),n=q(t);return a<=n}function De(e,t,a){const n=q(e);return!(t&&n<q(t)||a&&n>q(a))}function V(e){return e instanceof Date&&!isNaN(e.getTime())}const Te=(e={})=>{const{onEnter:t,onEscape:a,onArrowKey:n,onTab:d,enabled:o=!0}=e,s=i.useCallback(l=>{if(o)switch(l.key){case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"ArrowDown":l.preventDefault();const m=l.key.replace("Arrow","").toLowerCase();n?.(m);break;case"Enter":l.preventDefault(),t?.();break;case"Escape":l.preventDefault(),a?.();break;case"Tab":d?.(l.shiftKey);break}},[o,t,a,n,d]);return{addKeyboardNavigation:i.useCallback(l=>{if(!(!l||!o))return l.addEventListener("keydown",s),()=>{l.removeEventListener("keydown",s)}},[s,o])}},xe=e=>{const t=i.useRef(0),a=i.useCallback(l=>{const m=document.getElementById(e[l]);m&&m instanceof HTMLSelectElement&&(m.focus(),t.current=l)},[e]),n=i.useCallback(()=>{const l=(t.current+1)%e.length;a(l)},[e.length,a]),d=i.useCallback(()=>{const l=t.current===0?e.length-1:t.current-1;a(l)},[e.length,a]),o=i.useCallback(()=>{a(0)},[a]),s=i.useCallback(()=>{a(e.length-1)},[e.length,a]),r=i.useCallback(l=>{const m=e.indexOf(l);m!==-1&&(t.current=m)},[e]);return{focusNext:n,focusPrevious:d,focusFirst:o,focusLast:s,focusElement:a,updateCurrentFocusIndex:r,currentFocusIndex:t.current}},F=({options:e})=>y.jsx(y.Fragment,{children:e.map(t=>y.jsx("option",{value:t.value,children:t.label},t.value))});F.__docgenInfo={description:"",methods:[],displayName:"OptionsRenderer",props:{options:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ value: number; label: string }",signature:{properties:[{key:"value",value:{name:"number",required:!0}},{key:"label",value:{name:"string",required:!0}}]}}],raw:"{ value: number; label: string }[]"},description:""}}};const de=ce.createContext(null),ue=({id:e,labels:t,value:a,disabled:n,onChangeHandler:d,selectOptions:o,ref:s,required:r=!1,invalid:l=!1})=>{const m=`${g}_select-${e}`,w=`${g}_label-${e}`;return y.jsxs("div",{className:`${g}_select-container ${g}_select-container-${e}`,children:[!t.hide&&y.jsxs("label",{id:w,htmlFor:m,className:`${g}_label ${g}_label-${e}`,children:[t.main,r&&y.jsx("span",{"aria-label":"required",className:`${g}_required-indicator`,children:"*"})]}),y.jsxs("select",{id:m,value:a,disabled:n,onChange:d,ref:s,className:`${g}_select ${g}_select-${e}`,required:r,"aria-invalid":l,"aria-labelledby":t.hide?void 0:w,children:[y.jsx("option",{value:-1,disabled:!0,children:t.placeholder}),o]})]})};ue.__docgenInfo={description:"",methods:[],displayName:"SelectRenderer",props:{id:{required:!0,tsType:{name:"string"},description:""},labels:{required:!0,tsType:{name:"signature",type:"object",raw:`{\r
  hide?: boolean;\r
  main?: string;\r
  placeholder?: string;\r
}`,signature:{properties:[{key:"hide",value:{name:"boolean",required:!1}},{key:"main",value:{name:"string",required:!1}},{key:"placeholder",value:{name:"string",required:!1}}]}},description:""},value:{required:!0,tsType:{name:"number"},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:""},onChangeHandler:{required:!0,tsType:{name:"signature",type:"function",raw:"(e: React.ChangeEvent<HTMLSelectElement>) => void",signature:{arguments:[{type:{name:"ReactChangeEvent",raw:"React.ChangeEvent<HTMLSelectElement>",elements:[{name:"HTMLSelectElement"}]},name:"e"}],return:{name:"void"}}},description:""},selectOptions:{required:!0,tsType:{name:"JSX.Element"},description:""},ref:{required:!1,tsType:{name:"ReactLegacyRef",raw:"React.LegacyRef<HTMLSelectElement>",elements:[{name:"HTMLSelectElement"}]},description:""},required:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},invalid:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}}};const me=({fieldKey:e})=>{const t=i.useContext(de);if(!t)throw new Error("SelectDatepickerField must be used within SelectDatepickerContext");const{baseId:a,labels:n,hideLabels:d,disabled:o,hasError:s,day:r,month:l,year:m,dayOptions:w,monthOptions:S,yearOptions:$,dayRef:u,monthRef:C,yearRef:E,onDayChange:T,onMonthChange:_,onYearChange:f}=t,h={day:{id:`day-${a}`,value:r,labels:{hide:d,main:n.dayLabel||"Day",placeholder:n.dayPlaceholder||"Select Day"},options:w,onChangeHandler:T,ref:u},month:{id:`month-${a}`,value:l,labels:{hide:d,main:n.monthLabel||"Month",placeholder:n.monthPlaceholder||"Select Month"},options:S,onChangeHandler:_,ref:C},year:{id:`year-${a}`,value:m,labels:{hide:d,main:n.yearLabel||"Year",placeholder:n.yearPlaceholder||"Select Year"},options:$,onChangeHandler:f,ref:E}}[e];return y.jsx(ue,{id:h.id,labels:h.labels,value:h.value,disabled:o,onChangeHandler:h.onChangeHandler,selectOptions:h.options,ref:h.ref,required:!0,invalid:s})};me.__docgenInfo={description:"",methods:[],displayName:"SelectDatepickerField",props:{fieldKey:{required:!0,tsType:{name:"union",raw:"'day' | 'month' | 'year'",elements:[{name:"literal",value:"'day'"},{name:"literal",value:"'month'"},{name:"literal",value:"'year'"}]},description:""}}};const Re=({id:e,className:t,minDate:a,maxDate:n,selectedDate:d,onDateChange:o,value:s,onChange:r,disabled:l=!1,hasError:m=!1,monthRef:w,yearRef:S,dayRef:$,labels:u={},order:C="month/day/year",reverseYears:E,hideLabels:T,..._})=>{const[f,N]=i.useState(-1),[h,j]=i.useState(-1),[L,O]=i.useState(-1),W=i.useMemo(()=>C&&ke(C)?C:"month/day/year",[C]),D=i.useMemo(()=>W.split("/"),[W]),he=i.useRef(`datepicker-${Math.random().toString(36).substr(2,9)}`),k=e||he.current,H=i.useMemo(()=>{const c={};return D.forEach(p=>{c[p]=`${g}_select-${p}-${k}`}),c},[D,k]),B=xe(D.map(c=>H[c])),{addKeyboardNavigation:U}=Te({onArrowKey:c=>{c==="right"||c==="down"?B.focusNext():(c==="left"||c==="up")&&B.focusPrevious()},enabled:!l});i.useEffect(()=>{const c=[];return D.forEach(p=>{const R=document.getElementById(H[p]);if(R){const I=U(R);I&&c.push(I)}}),()=>{c.forEach(p=>p())}},[D,H,U]);const ye=i.useMemo(()=>[`${g}_react-select-datepicker`,t].join(" "),[t]),M=i.useMemo(()=>s!==void 0?s:d,[s,d]),x=i.useMemo(()=>r??o,[r,o]);i.useEffect(()=>{},[C,a,n,d,u,r,o,s,x]);const Y=i.useMemo(()=>V(a)?q(a):void 0,[a]),A=i.useMemo(()=>V(n)?q(n):void 0,[n]),X=i.useMemo(()=>qe(Y,A),[Y,A]),v=X?Y:void 0,b=X?A:void 0,G=i.useMemo(()=>y.jsx(F,{options:Me(v,b,E)}),[b,v,E]),Q=i.useMemo(()=>y.jsx(F,{options:ie(v,b,f,u.months)}),[b,v,u.months,f]),Z=i.useMemo(()=>y.jsx(F,{options:we(v,b,h,f)}),[b,v,h,f]),ee=i.useCallback(c=>{const p=Number(c.target.value);N(p),ie(v,b,p,u.months).some(pe=>pe.value===h)||j(-1)},[h,v,b,u.months]),te=i.useCallback(c=>{const p=Number(c.target.value);j(p)},[]),ae=i.useCallback(c=>{O(Number(c.target.value))},[]),fe=i.useMemo(()=>({baseId:k,labels:u,hideLabels:T,disabled:l,hasError:m,day:L,month:h,year:f,dayOptions:Z,monthOptions:Q,yearOptions:G,dayRef:$,monthRef:w,yearRef:S,onDayChange:ae,onMonthChange:te,onYearChange:ee}),[k,u,T,l,m,L,h,f,Z,Q,G,$,w,S,ae,te,ee]);i.useEffect(()=>{M!=null&&V(M)&&be(M)?(O(Number(M.getDate())),j(Number(M.getMonth()+1)),N(Number(M.getFullYear()))):(O(-1),j(-1),N(-1))},[M]),i.useEffect(()=>{if(f!==-1&&h!==-1&&L!==-1){const c=ve(f,h,L);De(c,v,b)?x?.(c):x?.(null)}else x?.(null)},[L,h,f,x,v,b]);const K=i.useMemo(()=>{if(!m)return null;if(L===-1&&h===-1&&f===-1)return"Please select a date";const c=[];return L===-1&&c.push(u.dayLabel?.toLowerCase()||"day"),h===-1&&c.push(u.monthLabel?.toLowerCase()||"month"),f===-1&&c.push(u.yearLabel?.toLowerCase()||"year"),c.length===1?`Please select a ${c[0]}`:c.length===2?`Please select a ${c[0]} and ${c[1]}`:"Please select all date fields"},[m,L,h,f,u.dayLabel,u.monthLabel,u.yearLabel]),ne=`${e||k}-legend`,re=!!(u.groupLabel||!T),ge=u.groupLabel?u.groupLabel:u.yearLabel&&u.monthLabel&&u.dayLabel?`Select ${u.monthLabel}, ${u.dayLabel}, and ${u.yearLabel}`:"Select date";return y.jsxs("div",{..._,className:ye,id:e,role:"group","aria-labelledby":re?ne:void 0,"aria-describedby":K?`${e||k}-error`:void 0,"aria-invalid":m,children:[re&&y.jsx("label",{id:ne,className:`${g}_legend`,children:ge}),y.jsx(de.Provider,{value:fe,children:y.jsx("div",{className:`${g}_select-row`,children:D.map((c,p)=>{const R=c;return y.jsx(ce.Fragment,{children:y.jsx(me,{fieldKey:R})},`${c}-${p}`)})})}),K&&y.jsx("div",{id:`${e||k}-error`,className:`${g}_error-message`,role:"alert","aria-live":"polite",children:K})]})};Re.__docgenInfo={description:"",methods:[],displayName:"SelectDatepicker",props:{id:{required:!1,tsType:{name:"string"},description:"Unique identifier for the date picker component"},className:{required:!1,tsType:{name:"string"},description:"Additional CSS class names"},minDate:{required:!1,tsType:{name:"Date"},description:"Minimum selectable date"},maxDate:{required:!1,tsType:{name:"Date"},description:"Maximum selectable date"},selectedDate:{required:!1,tsType:{name:"union",raw:"Date | null",elements:[{name:"Date"},{name:"null"}]},description:"Currently selected date (deprecated: use value)"},onDateChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(date: Date | null) => void",signature:{arguments:[{type:{name:"union",raw:"Date | null",elements:[{name:"Date"},{name:"null"}]},name:"date"}],return:{name:"void"}}},description:"Callback function called when date changes (deprecated: use onChange)"},value:{required:!1,tsType:{name:"union",raw:"Date | null",elements:[{name:"Date"},{name:"null"}]},description:"Controlled value (preferred)"},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(date: Date | null) => void",signature:{arguments:[{type:{name:"union",raw:"Date | null",elements:[{name:"Date"},{name:"null"}]},name:"date"}],return:{name:"void"}}},description:"Change handler (preferred)"},labels:{required:!1,tsType:{name:"Partial",elements:[{name:"signature",type:"object",raw:`{
  /** Single label for the entire date picker group */
  readonly groupLabel?: string;
  /** Label for the year select field */
  readonly yearLabel?: string;
  /** Label for the month select field */
  readonly monthLabel?: string;
  /** Label for the day select field */
  readonly dayLabel?: string;
  /** Placeholder for the year select field */
  readonly yearPlaceholder?: string;
  /** Placeholder for the month select field */
  readonly monthPlaceholder?: string;
  /** Placeholder for the day select field */
  readonly dayPlaceholder?: string;
  /** Custom month names (1-12 indexed) */
  readonly months?: Months;
}`,signature:{properties:[{key:"groupLabel",value:{name:"string",required:!1},description:"Single label for the entire date picker group"},{key:"yearLabel",value:{name:"string",required:!1},description:"Label for the year select field"},{key:"monthLabel",value:{name:"string",required:!1},description:"Label for the month select field"},{key:"dayLabel",value:{name:"string",required:!1},description:"Label for the day select field"},{key:"yearPlaceholder",value:{name:"string",required:!1},description:"Placeholder for the year select field"},{key:"monthPlaceholder",value:{name:"string",required:!1},description:"Placeholder for the month select field"},{key:"dayPlaceholder",value:{name:"string",required:!1},description:"Placeholder for the day select field"},{key:"months",value:{name:"signature",type:"object",raw:`{
  readonly 1: string;
  readonly 2: string;
  readonly 3: string;
  readonly 4: string;
  readonly 5: string;
  readonly 6: string;
  readonly 7: string;
  readonly 8: string;
  readonly 9: string;
  readonly 10: string;
  readonly 11: string;
  readonly 12: string;
}`,signature:{properties:[{key:"1",value:{name:"string",required:!0}},{key:"2",value:{name:"string",required:!0}},{key:"3",value:{name:"string",required:!0}},{key:"4",value:{name:"string",required:!0}},{key:"5",value:{name:"string",required:!0}},{key:"6",value:{name:"string",required:!0}},{key:"7",value:{name:"string",required:!0}},{key:"8",value:{name:"string",required:!0}},{key:"9",value:{name:"string",required:!0}},{key:"10",value:{name:"string",required:!0}},{key:"11",value:{name:"string",required:!0}},{key:"12",value:{name:"string",required:!0}}]},required:!1},description:"Custom month names (1-12 indexed)"}]}}],raw:"Partial<SelectDatepickerLabels>"},description:"Custom labels for the date picker",defaultValue:{value:"{}",computed:!1}},disabled:{required:!1,tsType:{name:"boolean"},description:"Whether the date picker is disabled",defaultValue:{value:"false",computed:!1}},hasError:{required:!1,tsType:{name:"boolean"},description:"Whether the date picker has an error state",defaultValue:{value:"false",computed:!1}},monthRef:{required:!1,tsType:{name:"ReactLegacyRef",raw:"React.LegacyRef<HTMLSelectElement>",elements:[{name:"HTMLSelectElement"}]},description:"Ref for the month select element"},yearRef:{required:!1,tsType:{name:"ReactLegacyRef",raw:"React.LegacyRef<HTMLSelectElement>",elements:[{name:"HTMLSelectElement"}]},description:"Ref for the year select element"},dayRef:{required:!1,tsType:{name:"ReactLegacyRef",raw:"React.LegacyRef<HTMLSelectElement>",elements:[{name:"HTMLSelectElement"}]},description:"Ref for the day select element"},reverseYears:{required:!1,tsType:{name:"boolean"},description:"Whether to reverse the order of years in the dropdown"},hideLabels:{required:!1,tsType:{name:"boolean"},description:"Whether to hide labels above the select inputs"},order:{required:!1,tsType:{name:"union",raw:`| 'day/month/year'\r
| 'day/year/month'\r
| 'month/day/year'\r
| 'month/year/day'\r
| 'year/month/day'\r
| 'year/day/month'`,elements:[{name:"literal",value:"'day/month/year'"},{name:"literal",value:"'day/year/month'"},{name:"literal",value:"'month/day/year'"},{name:"literal",value:"'month/year/day'"},{name:"literal",value:"'year/month/day'"},{name:"literal",value:"'year/day/month'"}]},description:"Order of date selects (defaults to 'month/day/year')",defaultValue:{value:"'month/day/year'",computed:!1}}}};export{Re as S};
