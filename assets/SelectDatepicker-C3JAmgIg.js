import{j as f}from"./jsx-runtime-BTky52tW.js";import{r as i,R as ue}from"./iframe-BWuqpQNe.js";const Le=(e,n,t)=>{const r=qe(e,n),d=Math.min(t,r);return new Date(e,n-1,d,0,0,0,0)},C=e=>new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0),W=e=>!isNaN(e.getTime()),qe=(e,n)=>new Date(e,n,0).getDate(),b="rsd_";class J{constructor(n=50){this.cache=new Map,this.maxSize=n}get(n){const t=this.cache.get(n);return t!==void 0&&(this.cache.delete(n),this.cache.set(n,t)),t}set(n,t){if(this.cache.has(n))this.cache.delete(n);else if(this.cache.size>=this.maxSize){const r=this.cache.keys().next().value;r!==void 0&&this.cache.delete(r)}this.cache.set(n,t)}clear(){this.cache.clear()}}const ie=new J,oe=new J,de=new J,U=(...e)=>e.map(n=>String(n||"undefined")).join("|"),Y=(e,n,t)=>{const r=Math.floor((n-e)/t)+1,d=new Array(r);for(let c=0;c<r;c++)d[c]=e+c*t;return d},ke=(e,n,t)=>{const r=U(e?.getFullYear()||"undefined",n?.getFullYear()||new Date().getFullYear(),t||!1);let d=ie.get(r);if(d)return d;const c=n?n.getFullYear():new Date().getFullYear(),o=e?e.getFullYear():1900;let l=Y(c,o,-1);t&&(l=l.reverse()),d=new Array(l.length);for(let a=0;a<l.length;a++)d[a]={value:l[a],label:`${l[a]}`};return ie.set(r,d),d},ce=(e,n,t=-1,r={1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"})=>{const d=Object.keys(r).sort((a,m)=>Number(a)-Number(m)).map(a=>`${a}:${r[a]}`).join(","),c=U(e?.getFullYear()||"undefined",n?.getFullYear()||"undefined",t,d);let o=oe.get(c);if(o)return o;let l=Y(1,12,1);if(n&&t!==-1&&t===n.getFullYear()){const a=n.getMonth()+1;l=l.slice(0,a)}if(e&&t!==-1&&t===e.getFullYear()){const a=e.getMonth()+1;l=l.slice(a-1,l.length)}o=new Array(l.length);for(let a=0;a<l.length;a++){const m=l[a];o[a]={value:m,label:r[m]||`Month ${m}`}}return oe.set(c,o),o},De=(e,n,t=-1,r=-1)=>{const d=U(e?.getFullYear()||"undefined",e?.getMonth()||"undefined",n?.getFullYear()||"undefined",n?.getMonth()||"undefined",t,r);let c=de.get(d);if(c)return c;let o=[];if(t===-1)o=Y(1,31,1);else{const l=r===-1?1900:r,a=new Date(l,t,0).getDate();o=Y(1,a,1)}if(n&&r===n.getFullYear()&&t===n.getMonth()+1){const l=n.getDate();o=o.slice(0,l)}if(e&&r===e.getFullYear()&&t===e.getMonth()+1){const l=e.getDate();o=o.slice(l-1,o.length)}c=new Array(o.length);for(let l=0;l<o.length;l++)c[l]={value:o[l],label:`${o[l]}`};return de.set(d,c),c},Ce=["day/month/year","day/year/month","month/day/year","month/year/day","year/month/day","year/day/month"];function Te(e){return Ce.includes(e)}function Fe(e,n){if(!e||!n)return!0;const t=C(e),r=C(n);return t<=r}function xe(e,n,t){const r=C(e);return!(n&&r<C(n)||t&&r>C(t))}function S(e){return e instanceof Date&&!isNaN(e.getTime())}const Re=(e={})=>{const{onEnter:n,onEscape:t,onArrowKey:r,onTab:d,enabled:c=!0}=e,o=i.useCallback(a=>{if(c)switch(a.key){case"ArrowLeft":case"ArrowRight":{a.preventDefault();const m=a.key.replace("Arrow","").toLowerCase();r?.(m);break}case"ArrowUp":case"ArrowDown":break;case"Enter":a.preventDefault(),n?.();break;case"Escape":a.preventDefault(),t?.();break;case"Tab":d?.(a.shiftKey);break}},[c,n,t,r,d]);return{addKeyboardNavigation:i.useCallback(a=>{if(!(!a||!c))return a.addEventListener("keydown",o),()=>{a.removeEventListener("keydown",o)}},[o,c])}},Se=e=>{const n=i.useRef(0),t=i.useCallback(a=>{const m=document.getElementById(e[a]);m&&m instanceof HTMLSelectElement&&(m.focus(),n.current=a)},[e]),r=i.useCallback(()=>{const a=(n.current+1)%e.length;t(a)},[e.length,t]),d=i.useCallback(()=>{const a=n.current===0?e.length-1:n.current-1;t(a)},[e.length,t]),c=i.useCallback(()=>{t(0)},[t]),o=i.useCallback(()=>{t(e.length-1)},[e.length,t]),l=i.useCallback(a=>{const m=e.indexOf(a);m!==-1&&(n.current=m)},[e]);return{focusNext:r,focusPrevious:d,focusFirst:c,focusLast:o,focusElement:t,updateCurrentFocusIndex:l,currentFocusIndex:n.current}},A=({options:e})=>f.jsx(f.Fragment,{children:e.map(n=>f.jsx("option",{value:n.value,children:n.label},n.value))});A.__docgenInfo={description:"",methods:[],displayName:"OptionsRenderer",props:{options:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ value: number; label: string }",signature:{properties:[{key:"value",value:{name:"number",required:!0}},{key:"label",value:{name:"string",required:!0}}]}}],raw:"{ value: number; label: string }[]"},description:""}}};const me=ue.createContext(null),ge=({id:e,labels:n,value:t,disabled:r,onChangeHandler:d,selectOptions:c,ref:o,required:l=!1,invalid:a=!1})=>{const m=`${b}_select-${e}`,L=`${b}_label-${e}`,T=[`${b}_label`,`${b}_label-${e}`,n.hide?`${b}_sr-only`:""].filter(Boolean).join(" ");return f.jsxs("div",{className:`${b}_select-container ${b}_select-container-${e}`,children:[f.jsxs("label",{id:L,htmlFor:m,className:T,children:[n.main,l&&f.jsx("span",{"aria-label":"required",className:`${b}_required-indicator`,children:"*"})]}),f.jsxs("select",{id:m,value:t,disabled:r,onChange:d,ref:o,className:`${b}_select ${b}_select-${e}`,required:l,"aria-invalid":a,"aria-labelledby":L,children:[f.jsx("option",{value:-1,disabled:!0,children:n.placeholder}),c]})]})};ge.__docgenInfo={description:"",methods:[],displayName:"SelectRenderer",props:{id:{required:!0,tsType:{name:"string"},description:""},labels:{required:!0,tsType:{name:"signature",type:"object",raw:`{\r
  hide?: boolean;\r
  main?: string;\r
  placeholder?: string;\r
}`,signature:{properties:[{key:"hide",value:{name:"boolean",required:!1}},{key:"main",value:{name:"string",required:!1}},{key:"placeholder",value:{name:"string",required:!1}}]}},description:""},value:{required:!0,tsType:{name:"number"},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:""},onChangeHandler:{required:!0,tsType:{name:"signature",type:"function",raw:"(e: React.ChangeEvent<HTMLSelectElement>) => void",signature:{arguments:[{type:{name:"ReactChangeEvent",raw:"React.ChangeEvent<HTMLSelectElement>",elements:[{name:"HTMLSelectElement"}]},name:"e"}],return:{name:"void"}}},description:""},selectOptions:{required:!0,tsType:{name:"JSX.Element"},description:""},ref:{required:!1,tsType:{name:"ReactLegacyRef",raw:"React.LegacyRef<HTMLSelectElement>",elements:[{name:"HTMLSelectElement"}]},description:""},required:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},invalid:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}}};const he=({fieldKey:e})=>{const n=i.useContext(me);if(!n)throw new Error("SelectDatepickerField must be used within SelectDatepickerContext");const{baseId:t,labels:r,hideLabels:d,disabled:c,isInvalid:o,day:l,month:a,year:m,dayOptions:L,monthOptions:T,yearOptions:$,dayRef:E,monthRef:u,yearRef:q,isRequired:N,onDayChange:R,onMonthChange:H,onYearChange:y}=n,g={day:{id:`day-${t}`,value:l,labels:{hide:d,main:r.dayLabel||"Day",placeholder:r.dayPlaceholder||"Select Day"},options:L,onChangeHandler:R,ref:E},month:{id:`month-${t}`,value:a,labels:{hide:d,main:r.monthLabel||"Month",placeholder:r.monthPlaceholder||"Select Month"},options:T,onChangeHandler:H,ref:u},year:{id:`year-${t}`,value:m,labels:{hide:d,main:r.yearLabel||"Year",placeholder:r.yearPlaceholder||"Select Year"},options:$,onChangeHandler:y,ref:q}}[e];return f.jsx(ge,{id:g.id,labels:g.labels,value:g.value,disabled:c,onChangeHandler:g.onChangeHandler,selectOptions:g.options,ref:g.ref,required:N,invalid:o})};he.__docgenInfo={description:"",methods:[],displayName:"SelectDatepickerField",props:{fieldKey:{required:!0,tsType:{name:"union",raw:"'day' | 'month' | 'year'",elements:[{name:"literal",value:"'day'"},{name:"literal",value:"'month'"},{name:"literal",value:"'year'"}]},description:""}}};const $e=({id:e,className:n,minDate:t,maxDate:r,selectedDate:d,onDateChange:c,value:o,onChange:l,disabled:a=!1,hasError:m=!1,isRequired:L=!1,monthRef:T,yearRef:$,dayRef:E,labels:u={},order:q="month/day/year",reverseYears:N,hideLabels:R,...H})=>{const[y,j]=i.useState(-1),[g,P]=i.useState(-1),[v,I]=i.useState(-1),_=i.useRef(!1),X=i.useRef(void 0),G=i.useMemo(()=>q&&Te(q)?q:"month/day/year",[q]),F=i.useMemo(()=>G.split("/"),[G]),fe=i.useRef(`datepicker-${Math.random().toString(36).substr(2,9)}`),k=e||fe.current,K=i.useMemo(()=>{const s={};return F.forEach(p=>{s[p]=`${b}_select-${p}-${k}`}),s},[F,k]),Q=Se(F.map(s=>K[s])),{addKeyboardNavigation:Z}=Re({onArrowKey:s=>{s==="right"||s==="down"?Q.focusNext():(s==="left"||s==="up")&&Q.focusPrevious()},enabled:!a});i.useEffect(()=>{const s=[];return F.forEach(p=>{const D=document.getElementById(K[p]);if(D){const B=Z(D);B&&s.push(B)}}),()=>{s.forEach(p=>p())}},[F,K,Z]);const ye=i.useMemo(()=>[`${b}_react-select-datepicker`,n].join(" "),[n]),h=i.useMemo(()=>o!==void 0?o:d,[o,d]),O=i.useMemo(()=>l??c,[l,c]);i.useEffect(()=>{},[q,t,r,d,u,l,c,o,O]);const V=i.useMemo(()=>S(t)?C(t):void 0,[t]),z=i.useMemo(()=>S(r)?C(r):void 0,[r]),ee=i.useMemo(()=>Fe(V,z),[V,z]),M=ee?V:void 0,w=ee?z:void 0,ne=i.useMemo(()=>f.jsx(A,{options:ke(M,w,N)}),[w,M,N]),te=i.useMemo(()=>f.jsx(A,{options:ce(M,w,y,u.months)}),[w,M,u.months,y]),ae=i.useMemo(()=>f.jsx(A,{options:De(M,w,g,y)}),[w,M,g,y]),re=i.useCallback(s=>{const p=Number(s.target.value);j(p),ce(M,w,p,u.months).some(we=>we.value===g)||P(-1)},[g,M,w,u.months]),se=i.useCallback(s=>{const p=Number(s.target.value);P(p)},[]),le=i.useCallback(s=>{I(Number(s.target.value))},[]);i.useEffect(()=>{const s=h&&S(h)&&W(h)?h.getTime():null;X.current!==s&&(X.current=s,s!==null&&h?(_.current=!0,I(Number(h.getDate())),P(Number(h.getMonth()+1)),j(Number(h.getFullYear()))):(_.current=!0,I(-1),P(-1),j(-1)))},[h]),i.useEffect(()=>{if(_.current){const s=h&&S(h)&&W(h)?h.getFullYear()===y&&h.getMonth()+1===g&&h.getDate()===v:v===-1&&g===-1&&y===-1;if(_.current=!1,s)return}if(y!==-1&&g!==-1&&v!==-1){const s=Le(y,g,v),p=h&&S(h)&&W(h)?h.getTime():null;if(xe(s,M,w)){const D=s.getTime();p!==D&&O?.(s)}else p!==null&&O?.(null)}},[v,g,y,O,M,w,h]);const x=i.useMemo(()=>{if(!m)return null;if(v===-1&&g===-1&&y===-1)return u.errorMessages?.missingDate??"Please select a date";const s=[];return v===-1&&s.push(u.dayLabel||"day"),g===-1&&s.push(u.monthLabel||"month"),y===-1&&s.push(u.yearLabel||"year"),s.length===0?null:s.length===1?u.errorMessages?.missingField?.(s[0])??`Please select a ${s[0]}`:s.length===2?u.errorMessages?.missingTwoFields?.(s[0],s[1])??`Please select a ${s[0]} and ${s[1]}`:u.errorMessages?.missingAllFields??"Please select all date fields"},[m,v,g,y,u.dayLabel,u.monthLabel,u.yearLabel,u.errorMessages]),pe=i.useMemo(()=>({baseId:k,labels:u,hideLabels:R,disabled:a,hasError:m,isRequired:L,isInvalid:!!x,day:v,month:g,year:y,dayOptions:ae,monthOptions:te,yearOptions:ne,dayRef:E,monthRef:T,yearRef:$,onDayChange:le,onMonthChange:se,onYearChange:re}),[k,u,R,a,m,L,x,v,g,y,ae,te,ne,E,T,$,le,se,re]),be=`${e||k}-legend`,ve=!!(u.groupLabel||!R),Me=u.groupLabel?u.groupLabel:u.yearLabel&&u.monthLabel&&u.dayLabel?`Select ${u.monthLabel}, ${u.dayLabel}, and ${u.yearLabel}`:"Select date";return f.jsxs("fieldset",{...H,className:ye,id:e,"aria-describedby":x?`${e||k}-error`:void 0,"aria-invalid":!!x,children:[ve&&f.jsx("legend",{id:be,className:`${b}_legend`,children:Me}),f.jsx(me.Provider,{value:pe,children:f.jsx("div",{className:`${b}_select-row`,children:F.map((s,p)=>{const D=s;return f.jsx(ue.Fragment,{children:f.jsx(he,{fieldKey:D})},`${s}-${p}`)})})}),x&&f.jsx("div",{id:`${e||k}-error`,className:`${b}_error-message`,role:"alert","aria-live":"polite",children:x})]})};$e.__docgenInfo={description:"",methods:[],displayName:"SelectDatepicker",props:{id:{required:!1,tsType:{name:"string"},description:"Unique identifier for the date picker component"},className:{required:!1,tsType:{name:"string"},description:"Additional CSS class names"},minDate:{required:!1,tsType:{name:"Date"},description:"Minimum selectable date"},maxDate:{required:!1,tsType:{name:"Date"},description:"Maximum selectable date"},selectedDate:{required:!1,tsType:{name:"union",raw:"Date | null",elements:[{name:"Date"},{name:"null"}]},description:"Currently selected date (deprecated: use value)"},onDateChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(date: Date | null) => void",signature:{arguments:[{type:{name:"union",raw:"Date | null",elements:[{name:"Date"},{name:"null"}]},name:"date"}],return:{name:"void"}}},description:"Callback function called when date changes (deprecated: use onChange)"},value:{required:!1,tsType:{name:"union",raw:"Date | null",elements:[{name:"Date"},{name:"null"}]},description:"Controlled value (preferred)"},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(date: Date | null) => void",signature:{arguments:[{type:{name:"union",raw:"Date | null",elements:[{name:"Date"},{name:"null"}]},name:"date"}],return:{name:"void"}}},description:"Change handler (preferred)"},labels:{required:!1,tsType:{name:"Partial",elements:[{name:"signature",type:"object",raw:`{
  /** Single label for the entire date picker group */
  readonly groupLabel?: string;
  /** Label for the year select field */
  readonly yearLabel?: string;
  /** Label for the month select field */
  readonly monthLabel?: string;
  /** Label for the day select field */
  readonly dayLabel?: string;
  /** Placeholder for the year select field */
  readonly yearPlaceholder?: string;
  /** Placeholder for the month select field */
  readonly monthPlaceholder?: string;
  /** Placeholder for the day select field */
  readonly dayPlaceholder?: string;
  /** Custom month names (1-12 indexed) */
  readonly months?: Months;
  /** Custom error messages for validation */
  readonly errorMessages?: {
    /** Message when no fields are selected */
    readonly missingDate?: string;
    /** Message when exactly one field is missing */
    readonly missingField?: (fieldLabel: string) => string;
    /** Message when exactly two fields are missing */
    readonly missingTwoFields?: (firstFieldLabel: string, secondFieldLabel: string) => string;
    /** Message when all fields are missing */
    readonly missingAllFields?: string;
  };
}`,signature:{properties:[{key:"groupLabel",value:{name:"string",required:!1},description:"Single label for the entire date picker group"},{key:"yearLabel",value:{name:"string",required:!1},description:"Label for the year select field"},{key:"monthLabel",value:{name:"string",required:!1},description:"Label for the month select field"},{key:"dayLabel",value:{name:"string",required:!1},description:"Label for the day select field"},{key:"yearPlaceholder",value:{name:"string",required:!1},description:"Placeholder for the year select field"},{key:"monthPlaceholder",value:{name:"string",required:!1},description:"Placeholder for the month select field"},{key:"dayPlaceholder",value:{name:"string",required:!1},description:"Placeholder for the day select field"},{key:"months",value:{name:"signature",type:"object",raw:`{
  readonly 1: string;
  readonly 2: string;
  readonly 3: string;
  readonly 4: string;
  readonly 5: string;
  readonly 6: string;
  readonly 7: string;
  readonly 8: string;
  readonly 9: string;
  readonly 10: string;
  readonly 11: string;
  readonly 12: string;
}`,signature:{properties:[{key:"1",value:{name:"string",required:!0}},{key:"2",value:{name:"string",required:!0}},{key:"3",value:{name:"string",required:!0}},{key:"4",value:{name:"string",required:!0}},{key:"5",value:{name:"string",required:!0}},{key:"6",value:{name:"string",required:!0}},{key:"7",value:{name:"string",required:!0}},{key:"8",value:{name:"string",required:!0}},{key:"9",value:{name:"string",required:!0}},{key:"10",value:{name:"string",required:!0}},{key:"11",value:{name:"string",required:!0}},{key:"12",value:{name:"string",required:!0}}]},required:!1},description:"Custom month names (1-12 indexed)"},{key:"errorMessages",value:{name:"signature",type:"object",raw:`{
  /** Message when no fields are selected */
  readonly missingDate?: string;
  /** Message when exactly one field is missing */
  readonly missingField?: (fieldLabel: string) => string;
  /** Message when exactly two fields are missing */
  readonly missingTwoFields?: (firstFieldLabel: string, secondFieldLabel: string) => string;
  /** Message when all fields are missing */
  readonly missingAllFields?: string;
}`,signature:{properties:[{key:"missingDate",value:{name:"string",required:!1},description:"Message when no fields are selected"},{key:"missingField",value:{name:"signature",type:"function",raw:"(fieldLabel: string) => string",signature:{arguments:[{type:{name:"string"},name:"fieldLabel"}],return:{name:"string"}},required:!1},description:"Message when exactly one field is missing"},{key:"missingTwoFields",value:{name:"signature",type:"function",raw:"(firstFieldLabel: string, secondFieldLabel: string) => string",signature:{arguments:[{type:{name:"string"},name:"firstFieldLabel"},{type:{name:"string"},name:"secondFieldLabel"}],return:{name:"string"}},required:!1},description:"Message when exactly two fields are missing"},{key:"missingAllFields",value:{name:"string",required:!1},description:"Message when all fields are missing"}]},required:!1},description:"Custom error messages for validation"}]}}],raw:"Partial<SelectDatepickerLabels>"},description:"Custom labels for the date picker",defaultValue:{value:"{}",computed:!1}},disabled:{required:!1,tsType:{name:"boolean"},description:"Whether the date picker is disabled",defaultValue:{value:"false",computed:!1}},hasError:{required:!1,tsType:{name:"boolean"},description:"Whether the date picker has an error state",defaultValue:{value:"false",computed:!1}},isRequired:{required:!1,tsType:{name:"boolean"},description:"Whether all select inputs are marked required",defaultValue:{value:"false",computed:!1}},monthRef:{required:!1,tsType:{name:"ReactLegacyRef",raw:"React.LegacyRef<HTMLSelectElement>",elements:[{name:"HTMLSelectElement"}]},description:"Ref for the month select element"},yearRef:{required:!1,tsType:{name:"ReactLegacyRef",raw:"React.LegacyRef<HTMLSelectElement>",elements:[{name:"HTMLSelectElement"}]},description:"Ref for the year select element"},dayRef:{required:!1,tsType:{name:"ReactLegacyRef",raw:"React.LegacyRef<HTMLSelectElement>",elements:[{name:"HTMLSelectElement"}]},description:"Ref for the day select element"},reverseYears:{required:!1,tsType:{name:"boolean"},description:"Whether to reverse the order of years in the dropdown"},hideLabels:{required:!1,tsType:{name:"boolean"},description:"Whether to hide labels above the select inputs"},order:{required:!1,tsType:{name:"union",raw:`| 'day/month/year'\r
| 'day/year/month'\r
| 'month/day/year'\r
| 'month/year/day'\r
| 'year/month/day'\r
| 'year/day/month'`,elements:[{name:"literal",value:"'day/month/year'"},{name:"literal",value:"'day/year/month'"},{name:"literal",value:"'month/day/year'"},{name:"literal",value:"'month/year/day'"},{name:"literal",value:"'year/month/day'"},{name:"literal",value:"'year/day/month'"}]},description:"Order of date selects (defaults to 'month/day/year')",defaultValue:{value:"'month/day/year'",computed:!1}}}};export{$e as S};
