import{j as y}from"./jsx-runtime-x38wkO75.js";import{r as o,R as ce}from"./iframe-8cb0yopR.js";const be=(e,t,a)=>{const r=Le(e,t),c=Math.min(a,r);return new Date(e,t-1,c,0,0,0,0)},k=e=>new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0),ve=e=>!isNaN(e.getTime()),Le=(e,t)=>new Date(e,t,0).getDate(),g="rsd_";class z{constructor(t=50){this.cache=new Map,this.maxSize=t}get(t){const a=this.cache.get(t);return a!==void 0&&(this.cache.delete(t),this.cache.set(t,a)),a}set(t,a){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){const r=this.cache.keys().next().value;r!==void 0&&this.cache.delete(r)}this.cache.set(t,a)}clear(){this.cache.clear()}}const le=new z,se=new z,oe=new z,J=(...e)=>e.map(t=>String(t||"undefined")).join("|"),P=(e,t,a)=>{const r=Math.floor((t-e)/a)+1,c=new Array(r);for(let d=0;d<r;d++)c[d]=e+d*a;return c},Me=(e,t,a)=>{const r=J(e?.getFullYear()||"undefined",t?.getFullYear()||new Date().getFullYear(),a||!1);let c=le.get(r);if(c)return c;const d=t?t.getFullYear():new Date().getFullYear(),s=e?e.getFullYear():1900;let l=P(d,s,-1);a&&(l=l.reverse()),c=new Array(l.length);for(let n=0;n<l.length;n++)c[n]={value:l[n],label:`${l[n]}`};return le.set(r,c),c},ie=(e,t,a=-1,r={1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"})=>{const c=Object.keys(r).sort((n,u)=>Number(n)-Number(u)).map(n=>`${n}:${r[n]}`).join(","),d=J(e?.getFullYear()||"undefined",t?.getFullYear()||"undefined",a,c);let s=se.get(d);if(s)return s;let l=P(1,12,1);if(t&&a!==-1&&a===t.getFullYear()){const n=t.getMonth()+1;l=l.slice(0,n)}if(e&&a!==-1&&a===e.getFullYear()){const n=e.getMonth()+1;l=l.slice(n-1,l.length)}s=new Array(l.length);for(let n=0;n<l.length;n++){const u=l[n];s[n]={value:u,label:r[u]||`Month ${u}`}}return se.set(d,s),s},we=(e,t,a=-1,r=-1)=>{const c=J(e?.getFullYear()||"undefined",e?.getMonth()||"undefined",t?.getFullYear()||"undefined",t?.getMonth()||"undefined",a,r);let d=oe.get(c);if(d)return d;let s=[];if(a===-1)s=P(1,31,1);else{const l=r===-1?1900:r,n=new Date(l,a,0).getDate();s=P(1,n,1)}if(t&&r===t.getFullYear()&&a===t.getMonth()+1){const l=t.getDate();s=s.slice(0,l)}if(e&&r===e.getFullYear()&&a===e.getMonth()+1){const l=e.getDate();s=s.slice(l-1,s.length)}d=new Array(s.length);for(let l=0;l<s.length;l++)d[l]={value:s[l],label:`${s[l]}`};return oe.set(c,d),d},Ce=["day/month/year","day/year/month","month/day/year","month/year/day","year/month/day","year/day/month"];function qe(e){return Ce.includes(e)}function ke(e,t){if(!e||!t)return!0;const a=k(e),r=k(t);return a<=r}function De(e,t,a){const r=k(e);return!(t&&r<k(t)||a&&r>k(a))}function V(e){return e instanceof Date&&!isNaN(e.getTime())}const Te=(e={})=>{const{onEnter:t,onEscape:a,onArrowKey:r,onTab:c,enabled:d=!0}=e,s=o.useCallback(n=>{if(d)switch(n.key){case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"ArrowDown":n.preventDefault();const u=n.key.replace("Arrow","").toLowerCase();r?.(u);break;case"Enter":n.preventDefault(),t?.();break;case"Escape":n.preventDefault(),a?.();break;case"Tab":c?.(n.shiftKey);break}},[d,t,a,r,c]);return{addKeyboardNavigation:o.useCallback(n=>{if(!(!n||!d))return n.addEventListener("keydown",s),()=>{n.removeEventListener("keydown",s)}},[s,d])}},Se=e=>{const t=o.useRef(0),a=o.useCallback(n=>{const u=document.getElementById(e[n]);u&&u instanceof HTMLSelectElement&&(u.focus(),t.current=n)},[e]),r=o.useCallback(()=>{const n=(t.current+1)%e.length;a(n)},[e.length,a]),c=o.useCallback(()=>{const n=t.current===0?e.length-1:t.current-1;a(n)},[e.length,a]),d=o.useCallback(()=>{a(0)},[a]),s=o.useCallback(()=>{a(e.length-1)},[e.length,a]),l=o.useCallback(n=>{const u=e.indexOf(n);u!==-1&&(t.current=u)},[e]);return{focusNext:r,focusPrevious:c,focusFirst:d,focusLast:s,focusElement:a,updateCurrentFocusIndex:l,currentFocusIndex:t.current}},F=({options:e})=>y.jsx(y.Fragment,{children:e.map(t=>y.jsx("option",{value:t.value,children:t.label},t.value))});F.__docgenInfo={description:"",methods:[],displayName:"OptionsRenderer",props:{options:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ value: number; label: string }",signature:{properties:[{key:"value",value:{name:"number",required:!0}},{key:"label",value:{name:"string",required:!0}}]}}],raw:"{ value: number; label: string }[]"},description:""}}};const de=ce.createContext(null),ue=({id:e,labels:t,value:a,disabled:r,onChangeHandler:c,selectOptions:d,ref:s,required:l=!1,invalid:n=!1})=>{const u=`${g}_select-${e}`,w=`${g}_label-${e}`;return y.jsxs("div",{className:`${g}_select-container ${g}_select-container-${e}`,children:[!t.hide&&y.jsxs("label",{id:w,htmlFor:u,className:`${g}_label ${g}_label-${e}`,children:[t.main,l&&y.jsx("span",{"aria-label":"required",className:`${g}_required-indicator`,children:"*"})]}),y.jsxs("select",{id:u,value:a,disabled:r,onChange:c,ref:s,className:`${g}_select ${g}_select-${e}`,required:l,"aria-invalid":n,"aria-labelledby":t.hide?void 0:w,children:[y.jsx("option",{value:-1,disabled:!0,children:t.placeholder}),d]})]})};ue.__docgenInfo={description:"",methods:[],displayName:"SelectRenderer",props:{id:{required:!0,tsType:{name:"string"},description:""},labels:{required:!0,tsType:{name:"signature",type:"object",raw:`{\r
  hide?: boolean;\r
  main?: string;\r
  placeholder?: string;\r
}`,signature:{properties:[{key:"hide",value:{name:"boolean",required:!1}},{key:"main",value:{name:"string",required:!1}},{key:"placeholder",value:{name:"string",required:!1}}]}},description:""},value:{required:!0,tsType:{name:"number"},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:""},onChangeHandler:{required:!0,tsType:{name:"signature",type:"function",raw:"(e: React.ChangeEvent<HTMLSelectElement>) => void",signature:{arguments:[{type:{name:"ReactChangeEvent",raw:"React.ChangeEvent<HTMLSelectElement>",elements:[{name:"HTMLSelectElement"}]},name:"e"}],return:{name:"void"}}},description:""},selectOptions:{required:!0,tsType:{name:"JSX.Element"},description:""},ref:{required:!1,tsType:{name:"ReactLegacyRef",raw:"React.LegacyRef<HTMLSelectElement>",elements:[{name:"HTMLSelectElement"}]},description:""},required:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},invalid:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}}};const me=({fieldKey:e})=>{const t=o.useContext(de);if(!t)throw new Error("SelectDatepickerField must be used within SelectDatepickerContext");const{baseId:a,labels:r,hideLabels:c,disabled:d,hasError:s,day:l,month:n,year:u,dayOptions:w,monthOptions:R,yearOptions:$,dayRef:m,monthRef:C,yearRef:E,onDayChange:T,onMonthChange:_,onYearChange:f}=t,h={day:{id:`day-${a}`,value:l,labels:{hide:c,main:r.dayLabel||"Day",placeholder:r.dayPlaceholder||"Select Day"},options:w,onChangeHandler:T,ref:m},month:{id:`month-${a}`,value:n,labels:{hide:c,main:r.monthLabel||"Month",placeholder:r.monthPlaceholder||"Select Month"},options:R,onChangeHandler:_,ref:C},year:{id:`year-${a}`,value:u,labels:{hide:c,main:r.yearLabel||"Year",placeholder:r.yearPlaceholder||"Select Year"},options:$,onChangeHandler:f,ref:E}}[e];return y.jsx(ue,{id:h.id,labels:h.labels,value:h.value,disabled:d,onChangeHandler:h.onChangeHandler,selectOptions:h.options,ref:h.ref,required:!0,invalid:s})};me.__docgenInfo={description:"",methods:[],displayName:"SelectDatepickerField",props:{fieldKey:{required:!0,tsType:{name:"union",raw:"'day' | 'month' | 'year'",elements:[{name:"literal",value:"'day'"},{name:"literal",value:"'month'"},{name:"literal",value:"'year'"}]},description:""}}};const xe=({id:e,className:t,minDate:a,maxDate:r,selectedDate:c,onDateChange:d,value:s,onChange:l,disabled:n=!1,hasError:u=!1,monthRef:w,yearRef:R,dayRef:$,labels:m={},order:C="month/day/year",reverseYears:E,hideLabels:T,..._})=>{const[f,N]=o.useState(-1),[h,j]=o.useState(-1),[L,O]=o.useState(-1),W=o.useMemo(()=>C&&qe(C)?C:"month/day/year",[C]),D=o.useMemo(()=>W.split("/"),[W]),he=o.useRef(`datepicker-${Math.random().toString(36).substr(2,9)}`),q=e||he.current,H=o.useMemo(()=>{const i={};return D.forEach(p=>{i[p]=`${g}_select-${p}-${q}`}),i},[D,q]),B=Se(D.map(i=>H[i])),{addKeyboardNavigation:U}=Te({onArrowKey:i=>{i==="right"||i==="down"?B.focusNext():(i==="left"||i==="up")&&B.focusPrevious()},enabled:!n});o.useEffect(()=>{const i=[];return D.forEach(p=>{const x=document.getElementById(H[p]);if(x){const I=U(x);I&&i.push(I)}}),()=>{i.forEach(p=>p())}},[D,H,U]);const ye=o.useMemo(()=>[`${g}_react-select-datepicker`,t].join(" "),[t]),M=o.useMemo(()=>s!==void 0?s:c,[s,c]),S=o.useMemo(()=>l??d,[l,d]);o.useEffect(()=>{},[C,a,r,c,m,l,d,s,S]);const Y=o.useMemo(()=>V(a)?k(a):void 0,[a]),A=o.useMemo(()=>V(r)?k(r):void 0,[r]),X=o.useMemo(()=>ke(Y,A),[Y,A]),b=X?Y:void 0,v=X?A:void 0,G=o.useMemo(()=>y.jsx(F,{options:Me(b,v,E)}),[v,b,E]),Q=o.useMemo(()=>y.jsx(F,{options:ie(b,v,f,m.months)}),[v,b,m.months,f]),Z=o.useMemo(()=>y.jsx(F,{options:we(b,v,h,f)}),[v,b,h,f]),ee=o.useCallback(i=>{const p=Number(i.target.value);N(p),ie(b,v,p,m.months).some(pe=>pe.value===h)||j(-1)},[h,b,v,m.months]),te=o.useCallback(i=>{const p=Number(i.target.value);j(p)},[]),ae=o.useCallback(i=>{O(Number(i.target.value))},[]),fe=o.useMemo(()=>({baseId:q,labels:m,hideLabels:T,disabled:n,hasError:u,day:L,month:h,year:f,dayOptions:Z,monthOptions:Q,yearOptions:G,dayRef:$,monthRef:w,yearRef:R,onDayChange:ae,onMonthChange:te,onYearChange:ee}),[q,m,T,n,u,L,h,f,Z,Q,G,$,w,R,ae,te,ee]);o.useEffect(()=>{M!=null&&V(M)&&ve(M)?(O(Number(M.getDate())),j(Number(M.getMonth()+1)),N(Number(M.getFullYear()))):(O(-1),j(-1),N(-1))},[M]),o.useEffect(()=>{if(f!==-1&&h!==-1&&L!==-1){const i=be(f,h,L);De(i,b,v)?S?.(i):S?.(null)}else S?.(null)},[L,h,f,S,b,v]);const K=o.useMemo(()=>{if(!u)return null;if(L===-1&&h===-1&&f===-1)return"Please select a date";const i=[];return L===-1&&i.push(m.dayLabel?.toLowerCase()||"day"),h===-1&&i.push(m.monthLabel?.toLowerCase()||"month"),f===-1&&i.push(m.yearLabel?.toLowerCase()||"year"),i.length===1?`Please select a ${i[0]}`:i.length===2?`Please select a ${i[0]} and ${i[1]}`:"Please select all date fields"},[u,L,h,f,m.dayLabel,m.monthLabel,m.yearLabel]),ne=`${e||q}-legend`,re=!!(m.groupLabel||!T),ge=m.groupLabel?m.groupLabel:m.yearLabel&&m.monthLabel&&m.dayLabel?`Select ${m.monthLabel}, ${m.dayLabel}, and ${m.yearLabel}`:"Select date";return y.jsxs("div",{..._,className:ye,id:e,role:"group","aria-labelledby":re?ne:void 0,"aria-describedby":K?`${e||q}-error`:void 0,"aria-invalid":u,children:[re&&y.jsx("label",{id:ne,className:`${g}_legend`,children:ge}),y.jsx(de.Provider,{value:fe,children:y.jsx("div",{className:`${g}_select-row`,children:D.map((i,p)=>{const x=i;return y.jsx(ce.Fragment,{children:y.jsx(me,{fieldKey:x})},`${i}-${p}`)})})}),K&&y.jsx("div",{id:`${e||q}-error`,className:`${g}_error-message`,role:"alert","aria-live":"polite",children:K})]})};xe.__docgenInfo={description:"",methods:[],displayName:"SelectDatepicker",props:{id:{required:!1,tsType:{name:"string"},description:"Unique identifier for the date picker component"},className:{required:!1,tsType:{name:"string"},description:"Additional CSS class names"},minDate:{required:!1,tsType:{name:"Date"},description:"Minimum selectable date"},maxDate:{required:!1,tsType:{name:"Date"},description:"Maximum selectable date"},selectedDate:{required:!1,tsType:{name:"union",raw:"Date | null",elements:[{name:"Date"},{name:"null"}]},description:"Currently selected date (deprecated: use value)"},onDateChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(date: Date | null) => void",signature:{arguments:[{type:{name:"union",raw:"Date | null",elements:[{name:"Date"},{name:"null"}]},name:"date"}],return:{name:"void"}}},description:"Callback function called when date changes (deprecated: use onChange)"},value:{required:!1,tsType:{name:"union",raw:"Date | null",elements:[{name:"Date"},{name:"null"}]},description:"Controlled value (preferred)"},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(date: Date | null) => void",signature:{arguments:[{type:{name:"union",raw:"Date | null",elements:[{name:"Date"},{name:"null"}]},name:"date"}],return:{name:"void"}}},description:"Change handler (preferred)"},labels:{required:!1,tsType:{name:"Partial",elements:[{name:"signature",type:"object",raw:`{
  /** Single label for the entire date picker group */
  readonly groupLabel?: string;
  /** Label for the year select field */
  readonly yearLabel?: string;
  /** Label for the month select field */
  readonly monthLabel?: string;
  /** Label for the day select field */
  readonly dayLabel?: string;
  /** Placeholder for the year select field */
  readonly yearPlaceholder?: string;
  /** Placeholder for the month select field */
  readonly monthPlaceholder?: string;
  /** Placeholder for the day select field */
  readonly dayPlaceholder?: string;
  /** Custom month names (1-12 indexed) */
  readonly months?: Months;
}`,signature:{properties:[{key:"groupLabel",value:{name:"string",required:!1},description:"Single label for the entire date picker group"},{key:"yearLabel",value:{name:"string",required:!1},description:"Label for the year select field"},{key:"monthLabel",value:{name:"string",required:!1},description:"Label for the month select field"},{key:"dayLabel",value:{name:"string",required:!1},description:"Label for the day select field"},{key:"yearPlaceholder",value:{name:"string",required:!1},description:"Placeholder for the year select field"},{key:"monthPlaceholder",value:{name:"string",required:!1},description:"Placeholder for the month select field"},{key:"dayPlaceholder",value:{name:"string",required:!1},description:"Placeholder for the day select field"},{key:"months",value:{name:"signature",type:"object",raw:`{
  readonly 1: string;
  readonly 2: string;
  readonly 3: string;
  readonly 4: string;
  readonly 5: string;
  readonly 6: string;
  readonly 7: string;
  readonly 8: string;
  readonly 9: string;
  readonly 10: string;
  readonly 11: string;
  readonly 12: string;
}`,signature:{properties:[{key:"1",value:{name:"string",required:!0}},{key:"2",value:{name:"string",required:!0}},{key:"3",value:{name:"string",required:!0}},{key:"4",value:{name:"string",required:!0}},{key:"5",value:{name:"string",required:!0}},{key:"6",value:{name:"string",required:!0}},{key:"7",value:{name:"string",required:!0}},{key:"8",value:{name:"string",required:!0}},{key:"9",value:{name:"string",required:!0}},{key:"10",value:{name:"string",required:!0}},{key:"11",value:{name:"string",required:!0}},{key:"12",value:{name:"string",required:!0}}]},required:!1},description:"Custom month names (1-12 indexed)"}]}}],raw:"Partial<SelectDatepickerLabels>"},description:"Custom labels for the date picker",defaultValue:{value:"{}",computed:!1}},disabled:{required:!1,tsType:{name:"boolean"},description:"Whether the date picker is disabled",defaultValue:{value:"false",computed:!1}},hasError:{required:!1,tsType:{name:"boolean"},description:"Whether the date picker has an error state",defaultValue:{value:"false",computed:!1}},monthRef:{required:!1,tsType:{name:"ReactLegacyRef",raw:"React.LegacyRef<HTMLSelectElement>",elements:[{name:"HTMLSelectElement"}]},description:"Ref for the month select element"},yearRef:{required:!1,tsType:{name:"ReactLegacyRef",raw:"React.LegacyRef<HTMLSelectElement>",elements:[{name:"HTMLSelectElement"}]},description:"Ref for the year select element"},dayRef:{required:!1,tsType:{name:"ReactLegacyRef",raw:"React.LegacyRef<HTMLSelectElement>",elements:[{name:"HTMLSelectElement"}]},description:"Ref for the day select element"},reverseYears:{required:!1,tsType:{name:"boolean"},description:"Whether to reverse the order of years in the dropdown"},hideLabels:{required:!1,tsType:{name:"boolean"},description:"Whether to hide labels above the select inputs"},order:{required:!1,tsType:{name:"union",raw:`| 'day/month/year'\r
| 'day/year/month'\r
| 'month/day/year'\r
| 'month/year/day'\r
| 'year/month/day'\r
| 'year/day/month'`,elements:[{name:"literal",value:"'day/month/year'"},{name:"literal",value:"'day/year/month'"},{name:"literal",value:"'month/day/year'"},{name:"literal",value:"'month/year/day'"},{name:"literal",value:"'year/month/day'"},{name:"literal",value:"'year/day/month'"}]},description:"Order of date selects (defaults to 'month/day/year')",defaultValue:{value:"'month/day/year'",computed:!1}}}};export{xe as S};
