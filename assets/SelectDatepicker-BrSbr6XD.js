import{j as f}from"./jsx-runtime-BGyi-95w.js";import{r as o,R as ue}from"./iframe-n2jbfaGn.js";const Le=(e,t,n)=>{const r=we(e,t),c=Math.min(n,r);return new Date(e,t-1,c,0,0,0,0)},D=e=>new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0),B=e=>!isNaN(e.getTime()),we=(e,t)=>new Date(e,t,0).getDate(),b="rsd_";class J{constructor(t=50){this.cache=new Map,this.maxSize=t}get(t){const n=this.cache.get(t);return n!==void 0&&(this.cache.delete(t),this.cache.set(t,n)),n}set(t,n){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){const r=this.cache.keys().next().value;r!==void 0&&this.cache.delete(r)}this.cache.set(t,n)}clear(){this.cache.clear()}}const se=new J,oe=new J,ie=new J,W=(...e)=>e.map(t=>String(t||"undefined")).join("|"),Y=(e,t,n)=>{const r=Math.floor((t-e)/n)+1,c=new Array(r);for(let u=0;u<r;u++)c[u]=e+u*n;return c},Ce=(e,t,n)=>{const r=W(e?.getFullYear()||"undefined",t?.getFullYear()||new Date().getFullYear(),n||!1);let c=se.get(r);if(c)return c;const u=t?t.getFullYear():new Date().getFullYear(),i=e?e.getFullYear():1900;let s=Y(u,i,-1);n&&(s=s.reverse()),c=new Array(s.length);for(let a=0;a<s.length;a++)c[a]={value:s[a],label:`${s[a]}`};return se.set(r,c),c},ce=(e,t,n=-1,r={1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"})=>{const c=Object.keys(r).sort((a,d)=>Number(a)-Number(d)).map(a=>`${a}:${r[a]}`).join(","),u=W(e?.getFullYear()||"undefined",t?.getFullYear()||"undefined",n,c);let i=oe.get(u);if(i)return i;let s=Y(1,12,1);if(t&&n!==-1&&n===t.getFullYear()){const a=t.getMonth()+1;s=s.slice(0,a)}if(e&&n!==-1&&n===e.getFullYear()){const a=e.getMonth()+1;s=s.slice(a-1,s.length)}i=new Array(s.length);for(let a=0;a<s.length;a++){const d=s[a];i[a]={value:d,label:r[d]||`Month ${d}`}}return oe.set(u,i),i},ke=(e,t,n=-1,r=-1)=>{const c=W(e?.getFullYear()||"undefined",e?.getMonth()||"undefined",t?.getFullYear()||"undefined",t?.getMonth()||"undefined",n,r);let u=ie.get(c);if(u)return u;let i=[];if(n===-1)i=Y(1,31,1);else{const s=r===-1?1900:r,a=new Date(s,n,0).getDate();i=Y(1,a,1)}if(t&&r===t.getFullYear()&&n===t.getMonth()+1){const s=t.getDate();i=i.slice(0,s)}if(e&&r===e.getFullYear()&&n===e.getMonth()+1){const s=e.getDate();i=i.slice(s-1,i.length)}u=new Array(i.length);for(let s=0;s<i.length;s++)u[s]={value:i[s],label:`${i[s]}`};return ie.set(c,u),u},qe=["day/month/year","day/year/month","month/day/year","month/year/day","year/month/day","year/day/month"];function De(e){return qe.includes(e)}function Te(e,t){if(!e||!t)return!0;const n=D(e),r=D(t);return n<=r}function Re(e,t,n){const r=D(e);return!(t&&r<D(t)||n&&r>D(n))}function $(e){return e instanceof Date&&!isNaN(e.getTime())}const Se=(e={})=>{const{onEnter:t,onEscape:n,onArrowKey:r,onTab:c,enabled:u=!0}=e,i=o.useCallback(a=>{if(u)switch(a.key){case"ArrowLeft":case"ArrowRight":{a.preventDefault();const d=a.key.replace("Arrow","").toLowerCase();r?.(d);break}case"ArrowUp":case"ArrowDown":break;case"Enter":a.preventDefault(),t?.();break;case"Escape":a.preventDefault(),n?.();break;case"Tab":c?.(a.shiftKey);break}},[u,t,n,r,c]);return{addKeyboardNavigation:o.useCallback(a=>{if(!(!a||!u))return a.addEventListener("keydown",i),()=>{a.removeEventListener("keydown",i)}},[i,u])}},xe=e=>{const t=o.useRef(0),n=o.useCallback(a=>{const d=document.getElementById(e[a]);d&&d instanceof HTMLSelectElement&&(d.focus(),t.current=a)},[e]),r=o.useCallback(()=>{const a=(t.current+1)%e.length;n(a)},[e.length,n]),c=o.useCallback(()=>{const a=t.current===0?e.length-1:t.current-1;n(a)},[e.length,n]),u=o.useCallback(()=>{n(0)},[n]),i=o.useCallback(()=>{n(e.length-1)},[e.length,n]),s=o.useCallback(a=>{const d=e.indexOf(a);d!==-1&&(t.current=d)},[e]);return{focusNext:r,focusPrevious:c,focusFirst:u,focusLast:i,focusElement:n,updateCurrentFocusIndex:s,currentFocusIndex:t.current}},O=({options:e})=>f.jsx(f.Fragment,{children:e.map(t=>f.jsx("option",{value:t.value,children:t.label},t.value))});O.__docgenInfo={description:"",methods:[],displayName:"OptionsRenderer",props:{options:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ value: number; label: string }",signature:{properties:[{key:"value",value:{name:"number",required:!0}},{key:"label",value:{name:"string",required:!0}}]}}],raw:"{ value: number; label: string }[]"},description:""}}};const de=ue.createContext(null),me=({id:e,labels:t,value:n,disabled:r,onChangeHandler:c,selectOptions:u,ref:i,required:s=!1,invalid:a=!1})=>{const d=`${b}_select-${e}`,w=`${b}_label-${e}`,T=[`${b}_label`,`${b}_label-${e}`,t.hide?`${b}_sr-only`:""].filter(Boolean).join(" ");return f.jsxs("div",{className:`${b}_select-container ${b}_select-container-${e}`,children:[f.jsxs("label",{id:w,htmlFor:d,className:T,children:[t.main,s&&f.jsx("span",{"aria-label":"required",className:`${b}_required-indicator`,children:"*"})]}),f.jsxs("select",{id:d,value:n,disabled:r,onChange:c,ref:i,className:`${b}_select ${b}_select-${e}`,required:s,"aria-invalid":a,"aria-labelledby":w,children:[f.jsx("option",{value:-1,disabled:!0,children:t.placeholder}),u]})]})};me.__docgenInfo={description:"",methods:[],displayName:"SelectRenderer",props:{id:{required:!0,tsType:{name:"string"},description:""},labels:{required:!0,tsType:{name:"signature",type:"object",raw:`{\r
  hide?: boolean;\r
  main?: string;\r
  placeholder?: string;\r
}`,signature:{properties:[{key:"hide",value:{name:"boolean",required:!1}},{key:"main",value:{name:"string",required:!1}},{key:"placeholder",value:{name:"string",required:!1}}]}},description:""},value:{required:!0,tsType:{name:"number"},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:""},onChangeHandler:{required:!0,tsType:{name:"signature",type:"function",raw:"(e: React.ChangeEvent<HTMLSelectElement>) => void",signature:{arguments:[{type:{name:"ReactChangeEvent",raw:"React.ChangeEvent<HTMLSelectElement>",elements:[{name:"HTMLSelectElement"}]},name:"e"}],return:{name:"void"}}},description:""},selectOptions:{required:!0,tsType:{name:"JSX.Element"},description:""},ref:{required:!1,tsType:{name:"ReactLegacyRef",raw:"React.LegacyRef<HTMLSelectElement>",elements:[{name:"HTMLSelectElement"}]},description:""},required:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},invalid:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}}};const he=({fieldKey:e})=>{const t=o.useContext(de);if(!t)throw new Error("SelectDatepickerField must be used within SelectDatepickerContext");const{baseId:n,labels:r,hideLabels:c,disabled:u,isInvalid:i,day:s,month:a,year:d,dayOptions:w,monthOptions:T,yearOptions:E,dayRef:m,monthRef:C,yearRef:N,onDayChange:x,onMonthChange:H,onYearChange:g}=t,h={day:{id:`day-${n}`,value:s,labels:{hide:c,main:r.dayLabel||"Day",placeholder:r.dayPlaceholder||"Select Day"},options:w,onChangeHandler:x,ref:m},month:{id:`month-${n}`,value:a,labels:{hide:c,main:r.monthLabel||"Month",placeholder:r.monthPlaceholder||"Select Month"},options:T,onChangeHandler:H,ref:C},year:{id:`year-${n}`,value:d,labels:{hide:c,main:r.yearLabel||"Year",placeholder:r.yearPlaceholder||"Select Year"},options:E,onChangeHandler:g,ref:N}}[e];return f.jsx(me,{id:h.id,labels:h.labels,value:h.value,disabled:u,onChangeHandler:h.onChangeHandler,selectOptions:h.options,ref:h.ref,required:!0,invalid:i})};he.__docgenInfo={description:"",methods:[],displayName:"SelectDatepickerField",props:{fieldKey:{required:!0,tsType:{name:"union",raw:"'day' | 'month' | 'year'",elements:[{name:"literal",value:"'day'"},{name:"literal",value:"'month'"},{name:"literal",value:"'year'"}]},description:""}}};const $e=({id:e,className:t,minDate:n,maxDate:r,selectedDate:c,onDateChange:u,value:i,onChange:s,disabled:a=!1,hasError:d=!1,monthRef:w,yearRef:T,dayRef:E,labels:m={},order:C="month/day/year",reverseYears:N,hideLabels:x,...H})=>{const[g,j]=o.useState(-1),[h,F]=o.useState(-1),[v,A]=o.useState(-1),P=o.useRef(!1),U=o.useRef(void 0),X=o.useMemo(()=>C&&De(C)?C:"month/day/year",[C]),R=o.useMemo(()=>X.split("/"),[X]),ye=o.useRef(`datepicker-${Math.random().toString(36).substr(2,9)}`),k=e||ye.current,I=o.useMemo(()=>{const l={};return R.forEach(p=>{l[p]=`${b}_select-${p}-${k}`}),l},[R,k]),G=xe(R.map(l=>I[l])),{addKeyboardNavigation:Q}=Se({onArrowKey:l=>{l==="right"||l==="down"?G.focusNext():(l==="left"||l==="up")&&G.focusPrevious()},enabled:!a});o.useEffect(()=>{const l=[];return R.forEach(p=>{const q=document.getElementById(I[p]);if(q){const z=Q(q);z&&l.push(z)}}),()=>{l.forEach(p=>p())}},[R,I,Q]);const fe=o.useMemo(()=>[`${b}_react-select-datepicker`,t].join(" "),[t]),y=o.useMemo(()=>i!==void 0?i:c,[i,c]),_=o.useMemo(()=>s??u,[s,u]);o.useEffect(()=>{},[C,n,r,c,m,s,u,i,_]);const K=o.useMemo(()=>$(n)?D(n):void 0,[n]),V=o.useMemo(()=>$(r)?D(r):void 0,[r]),Z=o.useMemo(()=>Te(K,V),[K,V]),M=Z?K:void 0,L=Z?V:void 0,ee=o.useMemo(()=>f.jsx(O,{options:Ce(M,L,N)}),[L,M,N]),te=o.useMemo(()=>f.jsx(O,{options:ce(M,L,g,m.months)}),[L,M,m.months,g]),ne=o.useMemo(()=>f.jsx(O,{options:ke(M,L,h,g)}),[L,M,h,g]),ae=o.useCallback(l=>{const p=Number(l.target.value);j(p),ce(M,L,p,m.months).some(Me=>Me.value===h)||F(-1)},[h,M,L,m.months]),re=o.useCallback(l=>{const p=Number(l.target.value);F(p)},[]),le=o.useCallback(l=>{A(Number(l.target.value))},[]);o.useEffect(()=>{const l=y&&$(y)&&B(y)?y.getTime():null;U.current!==l&&(U.current=l,l!==null&&y?(P.current=!0,A(Number(y.getDate())),F(Number(y.getMonth()+1)),j(Number(y.getFullYear()))):(P.current=!0,A(-1),F(-1),j(-1)))},[y]),o.useEffect(()=>{if(P.current){const l=y&&$(y)&&B(y)?y.getFullYear()===g&&y.getMonth()+1===h&&y.getDate()===v:v===-1&&h===-1&&g===-1;if(P.current=!1,l)return}if(g!==-1&&h!==-1&&v!==-1){const l=Le(g,h,v),p=y&&$(y)&&B(y)?y.getTime():null;if(Re(l,M,L)){const q=l.getTime();p!==q&&_?.(l)}else p!==null&&_?.(null)}},[v,h,g,_,M,L,y]);const S=o.useMemo(()=>{if(!d)return null;if(v===-1&&h===-1&&g===-1)return"Please select a date";const l=[];return v===-1&&l.push(m.dayLabel?.toLowerCase()||"day"),h===-1&&l.push(m.monthLabel?.toLowerCase()||"month"),g===-1&&l.push(m.yearLabel?.toLowerCase()||"year"),l.length===0?null:l.length===1?`Please select a ${l[0]}`:l.length===2?`Please select a ${l[0]} and ${l[1]}`:"Please select all date fields"},[d,v,h,g,m.dayLabel,m.monthLabel,m.yearLabel]),ge=o.useMemo(()=>({baseId:k,labels:m,hideLabels:x,disabled:a,hasError:d,isInvalid:!!S,day:v,month:h,year:g,dayOptions:ne,monthOptions:te,yearOptions:ee,dayRef:E,monthRef:w,yearRef:T,onDayChange:le,onMonthChange:re,onYearChange:ae}),[k,m,x,a,d,S,v,h,g,ne,te,ee,E,w,T,le,re,ae]),pe=`${e||k}-legend`,be=!!(m.groupLabel||!x),ve=m.groupLabel?m.groupLabel:m.yearLabel&&m.monthLabel&&m.dayLabel?`Select ${m.monthLabel}, ${m.dayLabel}, and ${m.yearLabel}`:"Select date";return f.jsxs("fieldset",{...H,className:fe,id:e,"aria-describedby":S?`${e||k}-error`:void 0,"aria-invalid":!!S,children:[be&&f.jsx("legend",{id:pe,className:`${b}_legend`,children:ve}),f.jsx(de.Provider,{value:ge,children:f.jsx("div",{className:`${b}_select-row`,children:R.map((l,p)=>{const q=l;return f.jsx(ue.Fragment,{children:f.jsx(he,{fieldKey:q})},`${l}-${p}`)})})}),S&&f.jsx("div",{id:`${e||k}-error`,className:`${b}_error-message`,role:"alert","aria-live":"polite",children:S})]})};$e.__docgenInfo={description:"",methods:[],displayName:"SelectDatepicker",props:{id:{required:!1,tsType:{name:"string"},description:"Unique identifier for the date picker component"},className:{required:!1,tsType:{name:"string"},description:"Additional CSS class names"},minDate:{required:!1,tsType:{name:"Date"},description:"Minimum selectable date"},maxDate:{required:!1,tsType:{name:"Date"},description:"Maximum selectable date"},selectedDate:{required:!1,tsType:{name:"union",raw:"Date | null",elements:[{name:"Date"},{name:"null"}]},description:"Currently selected date (deprecated: use value)"},onDateChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(date: Date | null) => void",signature:{arguments:[{type:{name:"union",raw:"Date | null",elements:[{name:"Date"},{name:"null"}]},name:"date"}],return:{name:"void"}}},description:"Callback function called when date changes (deprecated: use onChange)"},value:{required:!1,tsType:{name:"union",raw:"Date | null",elements:[{name:"Date"},{name:"null"}]},description:"Controlled value (preferred)"},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(date: Date | null) => void",signature:{arguments:[{type:{name:"union",raw:"Date | null",elements:[{name:"Date"},{name:"null"}]},name:"date"}],return:{name:"void"}}},description:"Change handler (preferred)"},labels:{required:!1,tsType:{name:"Partial",elements:[{name:"signature",type:"object",raw:`{
  /** Single label for the entire date picker group */
  readonly groupLabel?: string;
  /** Label for the year select field */
  readonly yearLabel?: string;
  /** Label for the month select field */
  readonly monthLabel?: string;
  /** Label for the day select field */
  readonly dayLabel?: string;
  /** Placeholder for the year select field */
  readonly yearPlaceholder?: string;
  /** Placeholder for the month select field */
  readonly monthPlaceholder?: string;
  /** Placeholder for the day select field */
  readonly dayPlaceholder?: string;
  /** Custom month names (1-12 indexed) */
  readonly months?: Months;
}`,signature:{properties:[{key:"groupLabel",value:{name:"string",required:!1},description:"Single label for the entire date picker group"},{key:"yearLabel",value:{name:"string",required:!1},description:"Label for the year select field"},{key:"monthLabel",value:{name:"string",required:!1},description:"Label for the month select field"},{key:"dayLabel",value:{name:"string",required:!1},description:"Label for the day select field"},{key:"yearPlaceholder",value:{name:"string",required:!1},description:"Placeholder for the year select field"},{key:"monthPlaceholder",value:{name:"string",required:!1},description:"Placeholder for the month select field"},{key:"dayPlaceholder",value:{name:"string",required:!1},description:"Placeholder for the day select field"},{key:"months",value:{name:"signature",type:"object",raw:`{
  readonly 1: string;
  readonly 2: string;
  readonly 3: string;
  readonly 4: string;
  readonly 5: string;
  readonly 6: string;
  readonly 7: string;
  readonly 8: string;
  readonly 9: string;
  readonly 10: string;
  readonly 11: string;
  readonly 12: string;
}`,signature:{properties:[{key:"1",value:{name:"string",required:!0}},{key:"2",value:{name:"string",required:!0}},{key:"3",value:{name:"string",required:!0}},{key:"4",value:{name:"string",required:!0}},{key:"5",value:{name:"string",required:!0}},{key:"6",value:{name:"string",required:!0}},{key:"7",value:{name:"string",required:!0}},{key:"8",value:{name:"string",required:!0}},{key:"9",value:{name:"string",required:!0}},{key:"10",value:{name:"string",required:!0}},{key:"11",value:{name:"string",required:!0}},{key:"12",value:{name:"string",required:!0}}]},required:!1},description:"Custom month names (1-12 indexed)"}]}}],raw:"Partial<SelectDatepickerLabels>"},description:"Custom labels for the date picker",defaultValue:{value:"{}",computed:!1}},disabled:{required:!1,tsType:{name:"boolean"},description:"Whether the date picker is disabled",defaultValue:{value:"false",computed:!1}},hasError:{required:!1,tsType:{name:"boolean"},description:"Whether the date picker has an error state",defaultValue:{value:"false",computed:!1}},monthRef:{required:!1,tsType:{name:"ReactLegacyRef",raw:"React.LegacyRef<HTMLSelectElement>",elements:[{name:"HTMLSelectElement"}]},description:"Ref for the month select element"},yearRef:{required:!1,tsType:{name:"ReactLegacyRef",raw:"React.LegacyRef<HTMLSelectElement>",elements:[{name:"HTMLSelectElement"}]},description:"Ref for the year select element"},dayRef:{required:!1,tsType:{name:"ReactLegacyRef",raw:"React.LegacyRef<HTMLSelectElement>",elements:[{name:"HTMLSelectElement"}]},description:"Ref for the day select element"},reverseYears:{required:!1,tsType:{name:"boolean"},description:"Whether to reverse the order of years in the dropdown"},hideLabels:{required:!1,tsType:{name:"boolean"},description:"Whether to hide labels above the select inputs"},order:{required:!1,tsType:{name:"union",raw:`| 'day/month/year'\r
| 'day/year/month'\r
| 'month/day/year'\r
| 'month/year/day'\r
| 'year/month/day'\r
| 'year/day/month'`,elements:[{name:"literal",value:"'day/month/year'"},{name:"literal",value:"'day/year/month'"},{name:"literal",value:"'month/day/year'"},{name:"literal",value:"'month/year/day'"},{name:"literal",value:"'year/month/day'"},{name:"literal",value:"'year/day/month'"}]},description:"Order of date selects (defaults to 'month/day/year')",defaultValue:{value:"'month/day/year'",computed:!1}}}};export{$e as S};
